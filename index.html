<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>

  <body>
    <div class="website-content" id="website-content">
      <nav id="navbar">
        <div class="info">
          <h2><a id="nav-header" href="/avant/index.html">Avant Kitchen</a></h2>
        </div>

        <div class="toggle-btn">
          <button
            class="burger"
            onclick="this.classList.toggle('active');"
          ></button>
        </div>
      </nav>
      <div class="overlay">
        <div class="overlay-menu">
          <div class="menu-item">
            <div class="menu-item-name">
              <p id="active"><a href="#about">Über Uns</a></p>
            </div>
          </div>
          <div class="menu-item">
            <div class="menu-item-name">
              <p><a href="/avant/kitchen.html">Projekte</a></p>
            </div>
          </div>
          <div class="menu-item">
            <div class="menu-item-name">
              <p><a href="/avant/contact.html">Kontakt</a></p>
            </div>
          </div>
        </div>
      </div>

      <div class="main">
        <h1>Avant</h1>
        <p>
          Herzlich willkommen bei Avant Kitchen – Ihrem Spezialisten für
          individuell gestaltete Traumküchen nach Maß. Wir bieten Ihnen
          exklusive Beratung, maßgeschneidertes Design und professionelle
          Montage, um Ihre perfekte Küche zu verwirklichen.
        </p>

        <button><a href="/avant/contact.html">Kontakt</a></button>
      </div>

      <div class="about" id="about">
        <div class="about-content">
          <div class="about-img">
            <img
              src="./assets/img/kitchen-images/Kueche1/tresen.jpg"
              alt="Kitchen Close Up Image"
            />
          </div>

          <div class="about-text-container">
            <h4>Erlebe Küchenästhetik neu</h4>

            <p>
              Bei Avant Kitchen betrachten wir die Küche als das Herzstück jedes
              Zuhauses. Seit unserer Gründung verpflichten wir uns dazu,
              hochwertige Küchenprodukte anzubieten, die nicht nur funktional,
              sondern auch durch herausragendes Design und innovative Lösungen
              überzeugen. <br />
              <br />
              Unser erfahrenes Team steht Ihnen bei jedem Schritt zur Seite, um
              sicherzustellen, dass Ihre individuellen Bedürfnisse und Wünsche
              erfüllt werden. Erfahren Sie mehr über unsere Geschichte, unsere
              Werte und unsere Leidenschaft für exzellente Küchenlösungen.
            </p>
          </div>
        </div>
      </div>

      <div class="projects" id="projects">
        <div class="project-text-content">
          <h3 id="projects-header">Unsere Arbeit</h3>
          <p>
            Entdecken Sie die Vielfalt an Küchenprodukten von Avant Kitchen -
            stilvoll und funktional zugleich. Von eleganten Möbeln über
            innovative Geräte bis hin zu praktischem Zubehör bieten wir alles
            für Ihre Traumküche. Unsere Produkte stehen für höchste Qualität und
            erstklassiges Design. Tauchen Sie ein und lassen Sie sich
            inspirieren!
          </p>
          <button>
            <a href="/avant/kitchen.html">Hier zur Gesamtübersicht</a>
          </button>
        </div>

        <div class="slider">
          <div class="slider-wrapper">
            <div class="slider-item">
              <figure>
                <img
                  src="./assets/img/kitchen-images/Kueche3/kuecheninsel.jpg"
                  alt="Kitchen Close Up Image"
                />
              </figure>
            </div>

            <div class="slider-item">
              <figure>
                <img
                  src="./assets/img/kitchen-images/Kueche10/kuechenschranklednightright.jpg"
                  alt="Kitchen Close Up Image"
                />
              </figure>
            </div>

            <div class="slider-item">
              <figure>
                <img
                  src="./assets/img/kitchen-images/Kueche9/kuecheninsel.jpg"
                  alt="Kitchen Close Up Image"
                />
              </figure>
            </div>

            <div class="slider-item">
              <figure>
                <img
                  src="./assets/img/kitchen-images/Kueche10/kuecheled.jpg"
                  alt="Kitchen Close Up Image"
                />
              </figure>
            </div>

            <div class="slider-item">
              <figure>
                <img
                  src="./assets/img/kitchen-images/Kueche8/kuechenmarmor.jpg"
                  alt="Kitchen Close Up Image"
                />
              </figure>
            </div>

            <div class="slider-item">
              <figure>
                <img
                  src="./assets/img/kitchen-images/Kueche10/kuechenschrankled.jpg"
                  alt="Kitchen Close Up Image"
                />
              </figure>
            </div>
          </div>
          <div class="slider-progress">
            <div class="slider-progress-bar"></div>
          </div>
        </div>
      </div>
    </div>
  </body>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/gsap.min.js"></script>
  <script src="https://unpkg.com/gsap@3/dist/CSSRulePlugin.min.js"></script>
  <script src="https://unpkg.com/@studio-freight/lenis@1.0.42/dist/lenis.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/ScrollTrigger.min.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const lenis = new Lenis();

      function raf(time) {
        lenis.raf(time);
        requestAnimationFrame(raf);
      }

      requestAnimationFrame(raf);

      function closeNavigation() {
        timeline.reverse();
        toggleButton.classList.remove("active");
        isOpen = false;
      }

      let activeItemIndicator = CSSRulePlugin.getRule(
        ".menu-item p#active::after"
      );
      const toggleButton = document.querySelector(".burger");
      let isOpen = false;

      gsap.set(".menu-item p", { y: 225 });

      const timeline = gsap.timeline({ paused: true });

      const headerLink = document.getElementById("nav-header");

      headerLink.addEventListener("click", function (event) {
        event.preventDefault(); // Verhindere das Standardverhalten des Ankers

        // Sanfte Scrollanimation zum Anfang der Seite
        gsap.to(window, {
          duration: 1.5,
          ease: "power4.inOut",
          onComplete: function () {
            window.scrollTo(0, 0); // Sicherstellen, dass die Seite am oberen Rand ist
          },
        });
      });

      headerLink.addEventListener("click", function (event) {
        event.preventDefault(); // Prevent default anchor behavior

        closeNavigation();

        // Smooth scroll animation to the top of the page
        gsap.to(window, {
          duration: 1.5,
          scrollTo: 0,
          ease: "power4.inOut",
        });
      });

      timeline.to(".overlay", {
        duration: 1.5,
        clipPath: "polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",
        ease: "power4.inOut",
      });

      timeline.to(
        ".menu-item p",
        {
          duration: 1.5,
          y: 0,
          stagger: 0.2,
          ease: "power4.out",
        },
        "-=1"
      );

      timeline.to(
        activeItemIndicator,
        {
          width: "100%",
          duration: 1,
          ease: "power4.out",
          delay: 0.5,
        },
        "<"
      );

      timeline.to(
        ".sub-nav",
        {
          bottom: "10%",
          opacity: 1,
          duration: 0.5,
          delay: 0.5,
        },
        "<"
      );

      toggleButton.addEventListener("click", function () {
        if (isOpen) {
          timeline.reverse();
        } else {
          timeline.play();
        }
        isOpen = !isOpen;
      });

      const nav = document.querySelector("nav");

      const navLinks = document.querySelectorAll(".menu-item a");

      navLinks.forEach(function (link) {
        link.addEventListener("click", function () {
          closeNavigation();
        });
      });

      gsap.from(nav, {
        duration: 1.5,
        delay: 0.5,
        y: -20,
        opacity: 0,
        ease: "power4.out",
      });

      const h1 = document.querySelector(".main h1");
      const p = document.querySelector(".main p");

      gsap.from(h1, {
        duration: 1,
        delay: 1,
        y: 10,
        opacity: 0,
        ease: "power2.out",
      });

      gsap.from(p, {
        duration: 1.25,
        delay: 1.25,
        y: 20,
        opacity: 0,
        ease: "power3.out",
      });

      gsap.from(".about-img img", {
        x: "-100%", // Startposition des Bildes außerhalb des Viewports auf der linken Seite
        opacity: 0, // Anfangs unsichtbar
        duration: 4, // Dauer der Animation
        ease: "power3.out",
        scrollTrigger: {
          trigger: ".about", // Der Triggerpunkt ist die 'about' Klasse
          start: "top 70%", // Starte die Animation, wenn das obere Ende des Elements 80% des Viewports erreicht hat
          end: "bottom 50%", // Stoppe die Animation, wenn das obere Ende des Elements 50% des Viewports erreicht hat
          scrub: true, // Aktiviere das 'scrubbing', um die Animation mit dem Scrollen zu synchronisieren
        },
      });

      gsap.from(".about-text-container > *", {
        x: "100%", // Startposition des Bildes außerhalb des Viewports auf der linken Seite
        opacity: 0, // Anfangs unsichtbar
        ease: "power4.out",
        scrollTrigger: {
          trigger: ".about", // Der Triggerpunkt ist die 'about' Klasse
          start: "top 70%", // Starte die Animation, wenn das obere Ende des Elements 80% des Viewports erreicht hat
          end: "bottom 50%", // Stoppe die Animation, wenn das obere Ende des Elements 50% des Viewports erreicht hat
          scrub: true, // Aktiviere das 'scrubbing', um die Animation mit dem Scrollen zu synchronisieren
        },
      });

      // Get the navigation element
      // Get the navigation element
      const navbar = document.getElementById("navbar");

      // Listen for scroll events
      window.addEventListener("scroll", () => {
        // Check if the user has scrolled down
        if (window.scrollY > 0) {
          // Add the 'scrolled' class to the navigation
          navbar.classList.add("scrolled");
        } else {
          // Remove the 'scrolled' class if the user scrolls back to the top
          navbar.classList.remove("scrolled");
        }
      });

      gsap.registerPlugin(ScrollTrigger);

      const lerp = (f0, f1, t) => (1 - t) * f0 + t * f1;
      const clamp = (val, min, max) => Math.max(min, Math.min(val, max));

      class DragScroll {
        constructor(obj) {
          this.el = document.querySelector(obj.el);
          this.wrap = this.el.querySelector(obj.wrap);
          this.items = this.el.querySelectorAll(obj.item);
          this.bar = this.el.querySelector(obj.bar);
          this.init();
        }

        init() {
          this.progress = 0;
          this.speed = 0;
          this.oldX = 0;
          this.x = 0;
          this.playrate = 0;

          this.bindings();
          this.events();
          this.calculate();
          this.raf();
        }

        bindings() {
          [
            "events",
            "calculate",
            "raf",
            "handleWheel",
            "move",
            "raf",
            "handleTouchStart",
            "handleTouchMove",
            "handleTouchEnd",
          ].forEach((method) => {
            this[method] = this[method].bind(this);
          });
        }

        calculate() {
          this.progress = 0;
          this.wrapWidth = this.items[0].clientWidth * this.items.length;
          this.wrap.style.width = `${this.wrapWidth}px`;
          this.maxScroll = this.wrapWidth - this.el.clientWidth;
        }

        handleWheel(e) {
          this.progress += e.deltaY;
          this.move();
        }

        handleTouchStart(e) {
          e.preventDefault();
          this.dragging = true;
          this.startX = e.clientX || e.touches[0].clientX;
          this.el.classList.add("dragging");
        }

        handleTouchMove(e) {
          if (!this.dragging) return false;
          const x = e.clientX || e.touches[0].clientX;
          this.progress += (this.startX - x) * 2.5;
          this.startX = x;
          this.move();
        }

        handleTouchEnd() {
          this.dragging = false;
          this.el.classList.remove("dragging");
        }

        move() {
          this.progress = clamp(this.progress, 0, this.maxScroll);
        }

        events() {
          window.addEventListener("resize", this.calculate);
          window.addEventListener("wheel", this.handleWheel);

          this.el.addEventListener("touchstart", this.handleTouchStart);
          window.addEventListener("touchmove", this.handleTouchMove);
          window.addEventListener("touchend", this.handleTouchEnd);

          window.addEventListener("mousedown", this.handleTouchStart);
          window.addEventListener("mousemove", this.handleTouchMove);
          window.addEventListener("mouseup", this.handleTouchEnd);
          document.body.addEventListener("mouseleave", this.handleTouchEnd);
        }

        raf() {
          this.x = lerp(this.x, this.progress, 0.1);
          this.playrate = this.x / this.maxScroll;

          this.wrap.style.transform = `translateX(${-this.x}px)`;
          this.bar.style.transform = `scaleX(${0.18 + this.playrate * 0.82})`;

          this.speed = Math.min(100, this.oldX - this.x);
          this.oldX = this.x;

          this.scale = lerp(this.scale, this.speed, 0.1);
          this.items.forEach((item) => {
            item.style.transform = `scale(${1 - Math.abs(this.speed) * 0.005})`;
            item.querySelector("img").style.transform = `scaleX(${
              1 + Math.abs(this.speed) * 0.004
            })`;
          });
        }
      }

      const scroll = new DragScroll({
        el: ".slider",
        wrap: ".slider-wrapper",
        item: ".slider-item",
        bar: ".slider-progress-bar",
      });

      const animateScroll = () => {
        requestAnimationFrame(animateScroll);
        scroll.raf();
      };
      animateScroll();
    });

    function showKitchen() {
      // Alle Abschnitte außer dem kitchen-div ausblenden
      document
        .querySelectorAll(".main, .contact, .about, .projects")
        .forEach(function (section) {
          section.style.display = "none";
        });
      // kitchen-div anzeigen
      document.getElementById("kitchen").style.display = "block";
    }

    // Event-Listener für den Button "Hier zur Gesamtübersicht" hinzufügen
    document
      .querySelector(".projects button")
      .addEventListener("click", function () {
        showKitchen(); // Funktion aufrufen, um die Gesamtübersicht anzuzeigen
      });

    function showAllSections() {
      // Alle Abschnitte wieder anzeigen
      document
        .querySelectorAll(".main, .contact, .about, .projects")
        .forEach(function (section) {
          section.style.display = "block";
        });
      // kitchen-div ausblenden
      document.getElementById("kitchen").style.display = "none";
    }

    // Event-Listener für den Button "Hier zur Gesamtübersicht" hinzufügen
    document
      .querySelector(".projects button")
      .addEventListener("click", function () {
        showKitchen(); // Funktion aufrufen, um die Gesamtübersicht anzuzeigen
      });

    // Event-Listener für den Button zum Rückgängigmachen der Gesamtübersicht hinzufügen
    document
      .querySelector(".kitchen button")
      .addEventListener("click", function () {
        location.reload();
      });

    document
      .querySelector("#single-product button")
      .addEventListener("click", function () {
        location.reload();
      });

    function showSingleProduct(imageSrc, info) {
      console.log(imageSrc, info);
      // Alle Abschnitte außer dem Single Product Div ausblenden
      document
        .querySelectorAll(".main, .contact, .about, .projects")
        .forEach(function (section) {
          console.log(section);
          section.style.display = "none";
        });
      // Single Product Div anzeigen und Inhalt setzen
      const singleProductDiv = document.getElementById("single-product");
      singleProductDiv.style.display = "block";
      singleProductDiv.querySelector("img").src = imageSrc;
      singleProductDiv.querySelector(".info").innerText = info;
    }

    document.querySelectorAll(".kitchen-card img").forEach(function (image) {
      image.addEventListener("click", function () {
        const imageSrc = this.getAttribute("data-src");
        const info = this.getAttribute("data-info");
        showAllSections();
        showSingleProduct(imageSrc, info);
      });
    });
  </script>
</html>
